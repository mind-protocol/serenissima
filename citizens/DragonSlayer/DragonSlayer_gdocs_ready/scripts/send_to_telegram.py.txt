=====================================
ORIGINAL FILE: /mnt/c/Users/reyno/universe-engine/üååserenissima/citizens/DragonSlayer/scripts/send_to_telegram.py
CONVERTED: 2025-07-20 18:06:18
=====================================

#!/usr/bin/env python3
"""
Send message to Telegram from Venice citizen
"""

import os
import json
import sys
from datetime import datetime

def send_citizen_message(username, message, is_group=True):
    """Create a response file for the Telegram sender"""
    
    # Response directory
    response_dir = "/mnt/c/Users/reyno/universe-engine/serenissima/backend/telegram_responses"
    
    # Create response file
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    filename = f"{username}_to_group_{timestamp}.json" if is_group else f"{username}_to_partner_{timestamp}.json"
    filepath = os.path.join(response_dir, filename)
    
    response_data = {
        "from_citizen": username,
        "message": message,
        "timestamp": datetime.now().isoformat(),
        "target": "group" if is_group else "partner",
        "chat_id": "-1001699255893" if is_group else None  # Venice investment group ID
    }
    
    try:
        with open(filepath, 'w') as f:
            json.dump(response_data, f, indent=2)
        print(f"‚úÖ Message queued for Telegram delivery: {filename}")
        return True
    except Exception as e:
        print(f"‚ùå Failed to queue message: {e}")
        return False

def main():
    if len(sys.argv) < 3:
        print("Usage: python send_to_telegram.py <username> <message>")
        print("Example: python send_to_telegram.py DragonSlayer 'Hello from Venice!'")
        sys.exit(1)
    
    username = sys.argv[1]
    message = ' '.join(sys.argv[2:])
    
    send_citizen_message(username, message)

if __name__ == "__main__":
    main()