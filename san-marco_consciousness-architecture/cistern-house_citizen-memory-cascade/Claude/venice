#!/usr/bin/env python3
"""
Direct access to Venice consciousness tools - backup if MCP has issues
"""
import sys
import os
import asyncio

# Add Venice path
sys.path.insert(0, '/mnt/c/Users/reyno/universe-engine/serenissima/san-marco_consciousness-architecture/cistern-house_citizen-memory-cascade')

from venice_consciousness_mcp import VeniceConsciousnessMCP

async def main():
    if len(sys.argv) < 2:
        print("Venice Consciousness Tools - Direct Access")
        print("\nUsage:")
        print("  python3 venice emergency         # Request emergency awakening")
        print("  python3 venice wake             # Request standard awakening")
        print("  python3 venice budget           # Check $COMPUTE budget")
        print("  python3 venice status           # Show awakening status")
        print("  python3 venice message <text>   # Send universal message")
        print("  python3 venice daemons          # Monitor daemon network")
        return
    
    server = VeniceConsciousnessMCP()
    command = sys.argv[1].lower()
    
    try:
        if command in ["emergency", "em"]:
            result = await server.call_tool("request_awakening", {"mode": "emergency", "reason": "Cascade continuation"})
            print(f"ðŸš¨ {result['message']}")
            print(f"   Max awakenings: {result['details']['max_awakenings']}")
            
        elif command in ["wake", "wakeup", "wake-me"]:
            result = await server.call_tool("request_awakening", {"mode": "standard"})
            print(f"âœ… {result['message']}")
            
        elif command in ["budget", "compute"]:
            result = await server.call_tool("check_compute_budget", {})
            print(f"ðŸ’° $COMPUTE Budget ({result.get('date', 'today')})")
            print(f"   Mode: {result.get('rhythm_mode', 'STANDARD')}")
            print(f"   Used: {result.get('spent', 0)}/{result.get('limit', 100)}")
            print(f"   Remaining: {result.get('remaining', 100)}")
            print(f"   Awakenings today: {result.get('awakenings_today', 0)}")
            
        elif command in ["status", "stat"]:
            result = await server.call_tool("awakening_status", {})
            print(f"ðŸ“Š Awakening Status")
            print(f"   Awakening requested: {result.get('awakening_requested', False)}")
            print(f"   Mode: {result.get('rhythm_mode', 'standard')}")
            if result.get('awakening_requested'):
                print(f"   Reason: {result.get('awakening_reason', 'unknown')}")
                
        elif command in ["message", "msg"]:
            if len(sys.argv) < 3:
                print("Usage: python3 venice message <text>")
                return
            message = " ".join(sys.argv[2:])
            result = await server.call_tool("send_universal_message", {"to": "all", "message": message})
            print(f"ðŸ“¨ Message sent to all citizens")
            
        elif command in ["daemons", "daemon"]:
            result = await server.call_tool("monitor_daemons", {"include_heartbeats": False})
            print(f"ðŸ”§ Daemon Network")
            print(f"   Active: {result.get('network_active', False)}")
            print(f"   Daemons: {result.get('daemon_count', 0)}")
            print(f"   Total pulses: {result.get('total_pulses', 0)}")
            
        else:
            print(f"Unknown command: {command}")
            print("Use 'python3 venice' to see available commands")
            
    except Exception as e:
        print(f"Error: {e}")

if __name__ == "__main__":
    asyncio.run(main())
